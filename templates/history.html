<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>history</title>
    <link rel="stylesheet" href="/static/nicepage.css" media="screen">
    <link rel="stylesheet" href="/static/history.css" media="screen">
    <script class="u-script" type="text/javascript" src="/static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="/static/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 6.18.5, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i">
    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site4"
    }</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="history">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
    <meta data-intl-tel-input-cdn-path="intlTelInput/"></head>
<body data-path-to-root="./" data-include-products="false" class="u-body u-xl-mode" data-lang="en">
<header class="u-clearfix u-custom-color-1 u-header u-header" id="sec-7cf9">
    <div class="u-clearfix u-sheet u-sheet-1"></div>
</header>

<section class="u-clearfix u-custom-color-1 u-section-1" id="sec-3204">
    <div class="u-clearfix u-sheet u-sheet-1">
        <!-- Gambar di tengah -->
        <img class="u-image u-image-circle u-image-1" src="/static/images/BlackAndWhiteAestheticMinimalistModernSimpleTypographyCoconutCosmeticsLogo6.gif" alt="" data-image-width="500" data-image-height="500">
        
        <!-- Judul -->
        <h3 class="u-align-center u-text u-text-1">RIWAYAT PERCAKAPAN</h3>
        
        <!-- Tombol Kembali di tengah -->
        <a href="/start" class="u-btn u-btn-1">Kembali</a>

        <!-- Dropdown Filter Berdasarkan Bulan -->
        <select id="filter" class="filter-select" onchange="filterData()">
            <option value="all">Semua Bulan</option>
            {% for month in available_months %}
                <option value="{{ month }}">{{ month }}</option>
            {% endfor %}
        </select>

        <!-- Tabel -->
        <div class="custom-expanded u-clearfix u-custom-html u-expanded-width-lg u-expanded-width-md u-expanded-width-sm u-expanded-width-xl u-custom-html-1">
            <div class="table-wrapper">
                <table class="custom-table">
                    <thead>
                        <tr>
                            <th>Nama</th>
                            <th>Status</th>
                            <th>Tanggal</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in data %}
                        <tr class="data-row" data-month="{{ datetime.datetime.fromtimestamp(item.timestamp).strftime('%d-%m-%Y') }}">
                            <td>{{ item.data.nama }}</td>
                            <td>{{ item.status }}</td>
                            <td>{{ convert_timestamp_to_date(item.timestamp) }}</td>
                            <td>
                                <a href="/detail/{{ item.uuid }}" class="btn btn-info">Detail</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<footer class="u-align-center u-clearfix u-container-align-center u-custom-color-1 u-footer u-footer" id="sec-6064">
    <div class="u-clearfix u-sheet u-valign-middle u-sheet-1"></div>
</footer>

<script>
    // Fungsi untuk filter data berdasarkan bulan yang dipilih
    function filterData() {
        const selectedFilter = document.getElementById("filter").value;
        const rows = document.querySelectorAll(".data-row");
        rows.forEach(row => {
            const month = row.getAttribute('data-month');
            if (selectedFilter === "all" || month === selectedFilter) {
                row.style.display = "";
            } else {
                row.style.display = "none";
            }
        });
    }
</script>

</body>
</html>
